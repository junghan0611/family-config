#+title:      여행 계획 템플릿
#+date:       [YYYY-MM-DD Day HH:MM]
#+filetags:   :family:travel:template:
#+identifier: YYYYMMDDTHHMMSS
#+export_file_name: YYYYMMDDTHHMMSS.md

* 여행 정보 :META:
:PROPERTIES:
:TRIP_ID: YYYYMMDD-destination
:DESTINATION: 목적지
:START_DATE: [YYYY-MM-DD Day]
:END_DATE: [YYYY-MM-DD Day]
:DURATION: N박 N일
:BUDGET_TOTAL: 0
:BUDGET_SPENT: 0
:PARTICIPANTS: 가족구성원 (예: 아빠, 엄마, 아이1, 아이2)
:STATUS: PLANNING
:CALENDAR_URL: https://calendar.google.com/event/...
:CREATED: [YYYY-MM-DD Day HH:MM]
:END:

여행 개요를 간단히 작성하세요.

** 가족 구성원
- 성인: N명
- 아동: N명 (연령: 만 N세, 만 N세)

** 여행 목적
- [ ] 휴양
- [ ] 관광
- [ ] 가족 행사
- [ ] 교육
- [ ] 기타: 

* Phase 1: Research (정보 수집) :AGENT:ACTION:
** STEP1. 항공권 검색 :TODO:
:PROPERTIES:
:AGENT_ACTION: mcp_web_search
:SEARCH_QUERY: {destination} 항공권 {date_range} {passengers}
:BUDGET_MAX: 0
:PRIORITY: HIGH
:DEADLINE: [YYYY-MM-DD Day]
:STATUS: TODO
:END:

*** Agent Instructions
#+begin_src yaml
action: web_search
query: "{{destination}} 항공권 {{start_date}} 왕복 {{passengers}}명"
budget_max: {{budget_airfare}}
preferences:
  - 좌석 인접 배치 (가족 단위)
  - 출발 시간: 아침 (09:00-11:00)
  - 귀국 시간: 저녁 (18:00-20:00)
  - 직항 우선
output:
  format: org_table
  sort_by: price
  fields:
    - airline
    - departure_time
    - arrival_time
    - price
    - seats_available
    - booking_url
#+end_src

*** Search Results
[Agent가 실행 후 여기에 자동 추가]

#+RESULTS:
| 항공사 | 출발 | 도착 | 가격 | 좌석 | 예약링크 |
|--------+------+------+------+------+----------|
|        |      |      |      |      |          |

*** Next Actions
- [ ] 가격 추이 모니터링 (1주일)
- [ ] 최적 옵션 선택
- [ ] 예약 진행
- [ ] Ledger 기록
- [ ] Calendar 등록

** STEP2. 숙박 검색 :TODO:
:PROPERTIES:
:AGENT_ACTION: mcp_web_search
:SEARCH_QUERY: {destination} 숙박 {date_range} {guests}
:BUDGET_MAX: 0
:ACCOMMODATION_TYPE: 호텔/펜션/리조트/에어비앤비
:PRIORITY: HIGH
:DEADLINE: [YYYY-MM-DD Day]
:STATUS: TODO
:END:

*** Agent Instructions
#+begin_src yaml
action: web_search
query: "{{destination}} {{accommodation_type}} {{check_in}} {{nights}}박 {{guests}}명"
budget_max: {{budget_accommodation}}
preferences:
  - 가족 친화적 시설
  - 침실: {{bedrooms}}개
  - 욕실: {{bathrooms}}개
  - 조식 포함 여부
  - 주차 가능
  - 수영장/키즈클럽
requirements:
  - 위치: {{preferred_location}}
  - 평점: 4.0 이상
  - 리뷰: 50개 이상
output:
  format: org_table
  sort_by: rating_price
  fields:
    - name
    - location
    - rating
    - reviews
    - price_per_night
    - total_price
    - amenities
    - booking_url
#+end_src

*** Search Results
[Agent가 실행 후 자동 추가]

#+RESULTS:
| 숙소명 | 위치 | 평점 | 리뷰수 | 1박 가격 | 총 가격 | 편의시설 | 예약링크 |
|--------+------+------+--------+----------+---------+----------+----------|
|        |      |      |        |          |         |          |          |

*** Next Actions
- [ ] 위치 비교 (관광지 거리)
- [ ] 리뷰 상세 확인
- [ ] 가격 협상 시도
- [ ] 예약 진행
- [ ] 예약 확인서 저장

** STEP3. 렌터카 검색 :TODO:
:PROPERTIES:
:AGENT_ACTION: mcp_web_search
:SEARCH_QUERY: {destination} 렌터카 {date_range}
:CAR_TYPE: 중형/대형/SUV/승합
:BUDGET_MAX: 0
:STATUS: TODO
:END:

*** Agent Instructions
#+begin_src yaml
action: web_search
query: "{{destination}} 렌터카 {{start_date}} {{duration}}일"
car_type: {{car_type}}
passengers: {{passengers}}
budget_max: {{budget_car_rental}}
preferences:
  - 보험: 완전자차
  - 연료: 가득-가득
  - 네비게이션 포함
  - 카시트: {{child_seats}}개
output:
  format: org_table
  fields:
    - company
    - car_model
    - price_per_day
    - total_price
    - insurance_included
    - booking_url
#+end_src

*** Search Results
[Agent 실행 후 자동 추가]

*** Next Actions
- [ ] 차량 크기 적합성 검토
- [ ] 보험 조건 확인
- [ ] 카시트 필요 여부
- [ ] 예약 진행

** STEP4. 액티비티 리서치 :TODO:
:PROPERTIES:
:AGENT_ACTION: mcp_web_search
:SEARCH_QUERY: {destination} 가족 액티비티
:AGE_RANGE: 아동 연령 (예: 5-8세)
:INTERESTS: 관심사 (예: 자연, 문화, 체험)
:STATUS: TODO
:END:

*** Agent Instructions
#+begin_src yaml
action: web_search
query: "{{destination}} 가족 여행 추천 액티비티 아이 {{age_range}}"
filters:
  - 가족 친화적
  - 실내/실외
  - 교육적 가치
  - 안전성
output:
  format: org_table
  fields:
    - activity_name
    - type
    - duration
    - cost
    - age_suitable
    - rating
    - booking_required
#+end_src

*** Activity Ideas
**** 자연 체험
- [ ] 
- [ ] 

**** 문화 체험
- [ ] 
- [ ] 

**** 레저 활동
- [ ] 
- [ ] 

**** 교육 프로그램
- [ ] 
- [ ] 

*** Next Actions
- [ ] 아이들 의견 수렴
- [ ] 일정에 배치
- [ ] 예약 필요 여부 확인
- [ ] 예산 책정

** STEP5. 식당 리서치 :TODO:
:PROPERTIES:
:AGENT_ACTION: mcp_web_search
:SEARCH_QUERY: {destination} 가족 식당 추천
:DIETARY_RESTRICTIONS: 알레르기/채식 등
:STATUS: TODO
:END:

*** Agent Instructions
#+begin_src yaml
action: web_search
query: "{{destination}} 맛집 가족 식사 추천"
preferences:
  - 아이 메뉴 있음
  - 좌석 넓음
  - 소음 관대
  - 주차 가능
dietary:
  restrictions: {{dietary_restrictions}}
output:
  format: org_table
  fields:
    - restaurant_name
    - cuisine_type
    - price_range
    - rating
    - kid_friendly
    - location
#+end_src

*** Restaurant List
| 식당명 | 음식 종류 | 가격대 | 평점 | 어린이 메뉴 | 위치 |
|--------+-----------+--------+------+-------------+------|
|        |           |        |      |             |      |

* Phase 2: Booking (예약) :AGENT:ACTION:
** 항공권 예약 :TODO:
:PROPERTIES:
:BOOKING_STATUS: PENDING
:BOOKING_DEADLINE: [YYYY-MM-DD Day]
:CONFIRMATION_NUMBER: 
:COST: 0
:PAYMENT_METHOD: 
:LEDGER_ACCOUNT: Expenses:Travel:Airfare
:END:

*** 예약 정보
- 항공사: 
- 편명: 
- 출발: [YYYY-MM-DD Day HH:MM]
- 도착: [YYYY-MM-DD Day HH:MM]
- 좌석: 
- 가격: 
- 예약 확인: 

*** Ledger Entry
#+begin_src ledger
YYYY/MM/DD 항공사명 항공권
    Expenses:Travel:Airfare              XXX,XXX KRW
    Assets:Bank:Checking
#+end_src

*** Calendar Event
:PROPERTIES:
:ICAL: true
:END:

#+begin_src ical
BEGIN:VEVENT
SUMMARY:항공편 - 목적지
DTSTART:YYYYMMDDTHHMMSS
DTEND:YYYYMMDDTHHMMSS
LOCATION:공항
DESCRIPTION:예약번호: XXX
URL:예약확인링크
END:VEVENT
#+end_src

** 숙박 예약 :TODO:
:PROPERTIES:
:BOOKING_STATUS: PENDING
:CONFIRMATION_NUMBER: 
:COST: 0
:CHECK_IN: [YYYY-MM-DD Day]
:CHECK_OUT: [YYYY-MM-DD Day]
:LEDGER_ACCOUNT: Expenses:Travel:Accommodation
:END:

*** 예약 정보
- 숙소명: 
- 주소: 
- 체크인: [YYYY-MM-DD Day HH:MM]
- 체크아웃: [YYYY-MM-DD Day HH:MM]
- 객실 타입: 
- 가격: 
- 조식 포함: 
- 취소 정책: 

*** Ledger Entry
#+begin_src ledger
YYYY/MM/DD 숙소명 숙박비
    Expenses:Travel:Accommodation        XXX,XXX KRW
    Assets:Bank:Checking
#+end_src

** 렌터카 예약 :TODO:
:PROPERTIES:
:BOOKING_STATUS: PENDING
:CONFIRMATION_NUMBER: 
:COST: 0
:LEDGER_ACCOUNT: Expenses:Travel:Transportation
:END:

*** 예약 정보
- 렌터카 회사: 
- 차량: 
- 인수: [YYYY-MM-DD Day HH:MM] 장소
- 반납: [YYYY-MM-DD Day HH:MM] 장소
- 가격: 
- 보험: 
- 추가 사항: 

*** Ledger Entry
#+begin_src ledger
YYYY/MM/DD 렌터카회사 렌터카
    Expenses:Travel:Transportation       XXX,XXX KRW
    Assets:Bank:Checking
#+end_src

* Phase 3: Planning (상세 계획) :AGENT:GENERATE:
** 일정표 :AGENT:GENERATE:
:PROPERTIES:
:AGENT_ACTION: generate_itinerary
:INPUT_DATA: {flights, accommodation, activities, restaurants}
:OUTPUT_FORMAT: org_agenda
:OPTIMIZE_FOR: family_friendly, rest_time, travel_distance
:END:

*** Day 1: [YYYY-MM-DD Day]
**** 08:00 - 공항 출발
**** 09:30 - 항공편 (편명: XXX)
**** 11:00 - 목적지 도착
**** 12:00 - 점심 식사 (장소: )
**** 14:00 - 숙소 체크인
**** 15:00 - 휴식
**** 17:00 - 근처 산책
**** 19:00 - 저녁 식사
**** 21:00 - 숙소 복귀

*** Day 2: [YYYY-MM-DD Day]
**** 08:00 - 조식
**** 09:30 - 액티비티 1
**** 12:00 - 점심
**** 14:00 - 액티비티 2
**** 17:00 - 휴식
**** 19:00 - 저녁
**** 21:00 - 자유 시간

*** Day N: [YYYY-MM-DD Day] (귀국)
**** 08:00 - 조식
**** 10:00 - 체크아웃
**** 12:00 - 점심
**** 15:00 - 공항 이동
**** 17:00 - 항공편
**** 18:30 - 도착

** 짐싸기 체크리스트 :AGENT:GENERATE:
:PROPERTIES:
:AGENT_ACTION: generate_packing_list
:TRIP_TYPE: beach/mountain/city
:DURATION: N
:SEASON: spring/summer/fall/winter
:PARTICIPANTS: adults + children
:END:

*** 의류 (성인)
- [ ] 상의 (N벌)
- [ ] 하의 (N벌)
- [ ] 속옷 (N벌)
- [ ] 양말 (N켤레)
- [ ] 외투
- [ ] 잠옷
- [ ] 신발 (운동화, 샌들)
- [ ] 모자
- [ ] 선글라스

*** 의류 (아동)
- [ ] 상의 (N벌 + 여벌)
- [ ] 하의 (N벌 + 여벌)
- [ ] 속옷 (N벌 + 여벌)
- [ ] 양말 (N켤레 + 여벌)
- [ ] 외투
- [ ] 잠옷
- [ ] 신발
- [ ] 모자
- [ ] 선글라스

*** 세면도구
- [ ] 칫솔/치약
- [ ] 샴푸/린스
- [ ] 바디워시
- [ ] 로션
- [ ] 선크림
- [ ] 화장품
- [ ] 면도기
- [ ] 헤어 제품

*** 약품
- [ ] 상비약 (해열제, 소화제 등)
- [ ] 처방약
- [ ] 밴드
- [ ] 연고
- [ ] 벌레 물린 약
- [ ] 멀미약

*** 아이 용품
- [ ] 기저귀/물티슈
- [ ] 분유/이유식
- [ ] 젖병/식기
- [ ] 간식
- [ ] 장난감
- [ ] 책
- [ ] 태블릿/충전기
- [ ] 카시트 (필요시)
- [ ] 유모차 (필요시)

*** 전자기기
- [ ] 휴대폰 + 충전기
- [ ] 카메라 + 메모리카드
- [ ] 노트북/태블릿
- [ ] 보조배터리
- [ ] 어댑터/멀티탭
- [ ] 이어폰

*** 문서
- [ ] 신분증/여권
- [ ] 예약 확인서 (인쇄)
- [ ] 여행자 보험
- [ ] 신용카드/현금
- [ ] 비상 연락처

*** 기타
- [ ] 가방 (백팩, 캐리어)
- [ ] 비닐봉투
- [ ] 우산/우비
- [ ] 수건
- [ ] 물병
- [ ] 간식
- [ ] 지퍼백

** 예산 상세 계획 :SHEET:
*** 예산 배분
| 항목 | 예산 | 실제 지출 | 차이 | 비율 |
|------+------+-----------+------+------|
| 항공 |      |           |      |      |
| 숙박 |      |           |      |      |
| 교통 |      |           |      |      |
| 식비 |      |           |      |      |
| 활동 |      |           |      |      |
| 쇼핑 |      |           |      |      |
| 기타 |      |           |      |      |
| 예비 |      |           |      |      |
|------+------+-----------+------+------|
| 합계 |      |           |      | 100% |
#+TBLFM: 

*** 일별 예산
| 날짜 | 식비 | 교통 | 활동 | 기타 | 합계 | 메모 |
|------+------+------+------+------+------+------|
|      |      |      |      |      |      |      |
#+TBLFM: 

* Phase 4: Tracking (진행 중 추적) :TRACKING:
** 경비 추적 :LEDGER:
:PROPERTIES:
:LEDGER_FILE: ~/org/family/finance/ledger/travel-YYYYMMDD.ledger
:END:

#+begin_src ledger :file ~/org/family/finance/ledger/travel-YYYYMMDD.ledger
; 여행 경비 추적

YYYY/MM/DD * Opening Balance
    Assets:Cash:Travel                 XXX,XXX KRW
    Equity:Opening

; 일별 지출 기록
YYYY/MM/DD 식사 - 장소명
    Expenses:Travel:Food                XX,XXX KRW
    Assets:Cash:Travel

YYYY/MM/DD 교통 - 택시/버스
    Expenses:Travel:Transportation      XX,XXX KRW
    Assets:Cash:Travel

YYYY/MM/DD 액티비티 - 활동명
    Expenses:Travel:Activities          XX,XXX KRW
    Assets:Cash:Travel

YYYY/MM/DD 쇼핑 - 품목
    Expenses:Travel:Shopping            XX,XXX KRW
    Assets:Cash:Travel

; 리포트
#+end_src

** 일정 동기화 :CALENDAR:
:PROPERTIES:
:CALENDAR_SYNC: google_calendar
:CALENDAR_ID: family@example.com
:ICAL_FEED: https://calendar.google.com/...
:SYNC_STATUS: pending
:LAST_SYNC: [YYYY-MM-DD Day HH:MM]
:END:

*** Google Calendar 동기화 방법
1. Org agenda를 iCal 형식으로 내보내기
2. Google Calendar에 임포트
3. 가족 구성원과 공유

** 일일 로그 :JOURNAL:
*** Day 1: [YYYY-MM-DD Day]
**** 날씨
- 
**** 활동
- 
**** 식사
- 조식: 
- 중식: 
- 석식: 
**** 하이라이트
- 
**** 메모
- 

*** Day 2: [YYYY-MM-DD Day]
(동일 형식 반복)

* Phase 5: Review (사후 정리) :REVIEW:
** 총 경비 정산 :FINAL:
*** Ledger 리포트
#+begin_src bash
ledger -f ~/org/family/finance/ledger/travel-YYYYMMDD.ledger bal Expenses:Travel
#+end_src

*** 예산 대비 실제
| 항목 | 예산 | 실제 | 차이 | 비율 |
|------+------+------+------+------|
|      |      |      |      |      |
#+TBLFM: 

*** 분석
- 초과/절감 항목: 
- 원인 분석: 
- 다음 여행 반영사항: 

** 사진/영상 정리 :MEDIA:
*** 저장 위치
- 로컬: ~/Pictures/Family/Travel/YYYYMMDD-destination/
- 클라우드: Google Photos / Album Name

*** 베스트 샷
- [ ] 선별 완료
- [ ] 편집 완료
- [ ] 인화 (필요시)
- [ ] 가족 앨범 추가

** 회고 :RETROSPECTIVE:
*** 잘한 점 (Keep)
- 
- 

*** 개선할 점 (Problem)
- 
- 

*** 다음 시도 (Try)
- 
- 

*** 가족 의견
**** 아빠
- 

**** 엄마
- 

**** 아이1
- 

**** 아이2
- 

** 다음 여행 인사이트 :INSIGHT:
*** 이번 여행에서 배운 것
- 
- 

*** 다음 여행 아이디어
- 
- 

*** 재방문 의향
- [ ] 재방문 희망
- [ ] 다른 곳 탐색

** 아카이브 :ARCHIVE:
:PROPERTIES:
:ARCHIVE_DATE: [YYYY-MM-DD Day]
:ARCHIVE_LOCATION: ~/repos/gh/family-config/memory/archives/
:END:

여행이 완료되면 이 문서를:
1. `__done` 태그 추가
2. `memory/archives/`로 이동
3. 패턴을 `memory/resources/`에 템플릿화

* 메타 정보 :META:
** 템플릿 버전
- Version: 1.0.0
- Created: 2025-10-14
- Author: Family-Config Project

** 사용 방법
1. 이 템플릿을 복사
2. 파일명을 Denote 형식으로 변경
   예: `20251014T120000--제주도-여행__family_travel_active.org`
3. 모든 {{placeholder}} 값 채우기
4. AI Agent에게 AGENT:ACTION 태그 항목 실행 요청
5. 진행하면서 체크리스트 완료
6. 여행 후 Review 섹션 작성
7. 완료 후 아카이브

** 관련 문서
- [[file:~/repos/gh/family-config/FAMILY.md][FAMILY.md - Agent 지침서]]
- [[file:~/repos/gh/family-config/docs/agent-guide.md][Agent Guide]]
- [[file:~/repos/gh/family-config/travel/schemas/trip-action-schema.yaml][Trip Action Schema]]
